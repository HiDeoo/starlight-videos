---
import type { Props } from '@astrojs/starlight/props'

import { getEntryPath } from '../libs/path'
import { getCollections } from '../libs/video'

import Card from './Card.astro'
import CardGrid from './CardGrid.astro'

const { locale } = Astro.props

const collections = await getCollections(locale)
---

<CardGrid>
  {
    collections.map((collection) => (
      <Card
        description={collection.data.video.description ?? collection.data.description}
        link={getEntryPath(collection.id, locale)}
        title={collection.data.title}
      />
    ))
  }
</CardGrid>
