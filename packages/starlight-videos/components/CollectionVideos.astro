---
import type { Props as StarlightProps } from '@astrojs/starlight/props'

import { getEntryPath } from '../libs/path'
import type { CollectionVideoEntry } from '../libs/video'

import Duration from './Duration.astro'

interface Props extends StarlightProps {
  collectionVideos: CollectionVideoEntry[]
  variant?: 'playlist' | undefined
}

const { collectionVideos, locale, variant } = Astro.props
---

<ul class:list={[{ 'sl-videos-collection-videos-playlist': variant === 'playlist' }]}>
  {
    collectionVideos.map(({ data, data: { video }, id }) => (
      <li>
        <a href={getEntryPath(id, locale)}>{data.title}</a>
        <Duration value={video.duration} />
      </li>
    ))
  }
</ul>

<style>
  ul {
    border: 1px solid red;
  }

  ul.sl-videos-collection-videos-playlist {
    max-height: 15rem;
    overflow-y: auto;
  }

  @media (min-width: 65rem) {
    ul.sl-videos-collection-videos-playlist {
      bottom: 0;
      left: 100%;
      max-height: unset;
      position: absolute;
      right: calc(-1 * var(--sl-videos-playlist-width));
      top: 0;
    }
  }
</style>
