---
import { YouTube } from '@astro-community/astro-embed-youtube'
import type { Props as StarlightProps } from '@astrojs/starlight/props'

import type { CollectionVideo, Video } from '../schemas'

import Difficulty from './Difficulty.astro'
import VideoCollectionVideos from './VideoCollectionVideos.astro'

interface Props extends StarlightProps {
  video: Video | CollectionVideo
}

const { video } = Astro.props

// TODO(HiDeoo) Youtube playlabel i18n
---

<div>
  <YouTube id={video.link} posterQuality="max" />
  {video.difficulty && <Difficulty value={video.difficulty} />}
  {video.type === 'collection-video' && <VideoCollectionVideos {...Astro.props} collectionVideo={video} />}
  {
    video.actions.length > 0 && (
      <div>
        Actions:
        {video.actions.map((action) => (
          <a href={action.link}>{action.text}</a>
        ))}
      </div>
    )
  }
</div>

<style>
  div :global(lite-youtube) {
    max-width: 100%;
  }
</style>
