---
import { Icon } from '@astrojs/starlight/components'

import type { CollectionVideo, Video } from '../schemas'

type Duration = (Video | CollectionVideo)['duration']

interface Props {
  value: Duration | Duration[]
  withIcon?: boolean
}

const { value, withIcon = true } = Astro.props

const durationInSeconds = Array.isArray(value) ? value.reduce((acc, duration) => acc + duration, 0) : value
// TODO(HiDeoo) Format to hours if duration is greater than 60 minutes
const durationInMinutes = Math.floor(durationInSeconds / 60)
// TODO(HiDeoo) i18n duration

// TODO(HiDeoo) sr-only i18n description or icon label
---

<div>{withIcon && <Icon name="seti:clock" size="0.75rem" />}{durationInMinutes}</div>

<style>
  div {
    align-items: center;
    display: flex;
    gap: 0.3125rem;
    margin-left: auto;
  }
</style>
